//////////////////////////////////////
// ChocoLang 1.0.0 - Chocolate Delight
// Phase / Version 1 Test File
// Made by Camila "Mocha" Rose
//////////////////////////////////////

puts "=== Choco Language - Phase 1 Demo ===";
puts "";

// ============================================
// 1. Functions with Parameters and Returns
// ============================================
puts "=== Functions ===";

fn add(a, b) {
    return a + b;
}

fn multiply(x, y) {
    return x * y;
}

fn greet(name) {
    return "Hello, #{name}!";
}

let sum = add(10, 20);
let product = multiply(5, 6);
let greeting = greet("Choco");

puts sum;
puts product;
puts greeting;

// Factorial function (recursive-style with loop)
fn factorial(n) {
    let result = 1;
    let i = 1;
    while i <= n {
        result = result * i;
        i = i + 1;
    }
    return result;
}

puts "Factorial of 5:";
puts factorial(5);

// ============================================
// 2. Arrays and Array Operations
// ============================================
puts "";
puts "=== Arrays ===";

let numbers = [1, 2, 3, 4, 5];
let fruits = ["apple", "banana", "cherry"];
let mixed = [42, "hello", true, 3.14];

puts "Numbers array:";
puts numbers;

puts "Fruits array:";
puts fruits;

puts "Mixed array:";
puts mixed;

// Array indexing
puts "First number:";
puts numbers[0];

puts "Second fruit:";
puts fruits[1];

puts "Mixed element:";
puts mixed[2];

// Working with arrays
let scores = [85, 92, 78, 95, 88];
puts "Test scores:";
puts scores;

// ============================================
// 3. For Loops with Ranges
// ============================================
puts "";
puts "=== For Loops ===";

puts "Count from 0 to 4:";
for i in 0..5 {
    puts i;
}

puts "Even numbers 0-10:";
for i in 0..6 {
    let even = i * 2;
    puts even;
}

puts "Sum using for loop:";
let total = 0;
for i in 1..11 {
    total = total + i;
}
puts total;

// ============================================
// 4. String Interpolation
// ============================================
puts "";
puts "=== String Interpolation ===";

let name = "Alice";
let age = 25;
let city = "Wonderland";

let message = "My name is #{name} and I am #{age} years old.";
puts message;

let location = "I live in #{city}!";
puts location;

fn introduce(person, years) {
    let intro = "This is #{person}, who is #{years} years old.";
    return intro;
}

puts introduce("Bob", 30);

// ============================================
// 5. Logical Operators (&&, ||, !)
// ============================================
puts "";
puts "=== Logical Operators ===";

let isAdult = true;
let hasLicense = true;
let canDrive = isAdult && hasLicense;

if canDrive {
    puts "Can drive: YES";
}

let isSunny = false;
let isWarm = true;
let niceWeather = isSunny || isWarm;

if niceWeather {
    puts "Weather is nice!";
}

let isRaining = false;
let notRaining = !isRaining;

if notRaining {
    puts "It's not raining!";
}

// Complex logical expressions
let x = 10;
let y = 20;
let z = 15;

if x < y && y > z {
    puts "x < y AND y > z";
}

if x > 5 || z < 10 {
    puts "x > 5 OR z < 10";
}

// ============================================
// 6. Modulo Operator (%)
// ============================================
puts "";
puts "=== Modulo Operator ===";

puts "Even or Odd check:";
for i in 0..10 {
    let remainder = i % 2;
    if remainder == 0 {
        let msg = "#{i} is even";
        puts msg;
    } else {
        let msg = "#{i} is odd";
        puts msg;
    }
}

// ============================================
// 7. Combined Example: FizzBuzz
// ============================================
puts "";
puts "=== FizzBuzz (1-20) ===";

for i in 1..21 {
    let by3 = i % 3;
    let by5 = i % 5;
    
    if by3 == 0 && by5 == 0 {
        puts "FizzBuzz";
    } else {
        if by3 == 0 {
            puts "Fizz";
        } else {
            if by5 == 0 {
                puts "Buzz";
            } else {
                puts i;
            }
        }
    }
}

// ============================================
// 8. Function with Array Parameter
// ============================================
puts "";
puts "=== Functions with Arrays ===";

fn sumArray(arr) {
    let sum = 0;
    let i = 0;
    while i < 5 {
        sum = sum + arr[i];
        i = i + 1;
    }
    return sum;
}

let myNumbers = [10, 20, 30, 40, 50];
let arraySum = sumArray(myNumbers);
puts "Sum of array:";
puts arraySum;

// ============================================
// 9. Nested Functions and Complex Logic
// ============================================
puts "Prime numbers 2-20:";
for i in 2..21 {
    let prime = isPrime(i);
    if prime {
        puts i;
    }
}

// ============================================
// 10. Advanced Function Example
// ============================================
puts "";
puts "=== Advanced Functions ===";

fn fibonacci(n) {
    if n <= 1 {
        return n;
    }
    
    let a = 0;
    let b = 1;
    let i = 2;
    
    while i <= n {
        let temp = a + b;
        a = b;
        b = temp;
        i = i + 1;
    }
    
    return b;
}

puts "Fibonacci sequence (first 10):";
for i in 0..10 {
    let fib = fibonacci(i);
    puts fib;
}

// ============================================
// 11. String Concatenation
// ============================================
puts "";
puts "=== String Operations ===";

let first = "Hello";
let second = "World";
let combined = first + " " + second;
puts combined;

let prefix = "Number: ";
let number = 42;
// Note: Direct number to string in interpolation
let result = "#{prefix}#{number}";
puts result;

// ============================================
// 12. Nested Loops with Arrays
// ============================================
puts "";
puts "=== Nested Loops ===";

puts "Multiplication table (3x3):";
for i in 1..4 {
    for j in 1..4 {
        let product = i * j;
        puts product;
    }
}

puts "";
puts "=== Phase 1 Demo Complete! ===";
puts "Features: Functions, Arrays, For Loops, String Interpolation, Logical Operators";

//////////////////////////////////////
// ChocoLang 2.0.0 - Sweet Wonderland
// Phase / Version 2 Test File
// Made by Camila "Mocha" Rose
//////////////////////////////////////

puts "=== Choco Phase 2 Demo ===";
puts "";

// ============================================
// 1. Structs / Custom Types
// ============================================
puts "=== Structs ===";

struct Person {
    name,
    age,
    city
}

let alice = Person { name: "Alice", age: 30, city: "NYC" };
let bob = Person { name: "Bob", age: 25, city: "LA" };

puts "Person 1:";
puts alice;

puts "Accessing fields:";
puts alice.name;
puts alice.age;
puts alice.city;

puts "Person 2:";
puts bob.name;

// ============================================
// 2. Break and Continue
// ============================================
puts "";
puts "=== Break and Continue ===";

puts "Break example - stop at 5:";
for i in 0..10 {
    if i == 5 {
    break;
    }
    puts i;
}

puts "Continue example - skip even numbers:";
for i in 0..10 {
    if i % 2 == 0 {
        continue;
    }
    puts i;
}

// ============================================
// 3. Standard Library - Math Functions
// ============================================
puts "";
puts "=== Math Functions ===";

let num = 16;
puts "sqrt(16):";
puts sqrt(num);

puts "pow(2, 8):";
puts pow(2, 8);

puts "abs(-42):";
puts abs(-42);

puts "floor(3.7):";
puts floor(3.7);

puts "ceil(3.2):";
puts ceil(3.2);

puts "round(3.5):";
puts round(3.5);

puts "min(5, 3):";
puts min(5, 3);

puts "max(5, 3):";
puts max(5, 3);

// ============================================
// 4. Random Numbers
// ============================================
puts "";
puts "=== Random Numbers ===";

puts "Random float (0-1):";
puts random();

puts "Random int (1-10):";
puts random_int(1, 10);

// ============================================
// 5. Array Functions
// ============================================
puts "";
puts "=== Array Functions ===";

let numbers = [1, 2, 3];
puts "Original array:";
puts numbers;

puts "Length of array:";
puts len(numbers);

// ============================================
// 6. String Functions
// ============================================
puts "";
puts "=== String Functions ===";

let text = "Hello World";
puts "Original string:";
puts text;

puts "Length:";
puts len(text);

puts "Uppercase:";
puts uppercase(text);

puts "Lowercase:";
puts lowercase(text);

puts "Substring (0, 5):";
puts substr(text, 0, 5);

let sentence = "apple,banana,cherry";
puts "Split by comma:";
let fruits = split(sentence, ",");
puts fruits;

puts "Join with ' - ':";
let joined = join(fruits, " - ");
puts joined;

// ============================================
// 7. Type Conversion
// ============================================
puts "";
puts "=== Type Conversion ===";

let num_str = "42";
puts "String to int:";
puts int(num_str);

let float_str = "3.14";
puts "String to float:";
puts float(float_str);

let number = 123;
puts "Number to string:";
puts str(number);

// ============================================
// 8. File I/O
// ============================================
puts "";
puts "=== File I/O ===";

// Write to file
let content = "Hello from Choco!";
let success = write_file("output.txt", content);

if success == true {
    puts "File written successfully!";
}

// Append to file
append_file("output.txt", "\nSecond line!");

// Read from file
let file_content = read_file("output.txt");
puts "File contents:";
puts file_content;

// Check if file exists
let exists = file_exists("output.txt");
if exists == true {
    puts "File exists!";
}

// ============================================
// 9. Error Handling
// ============================================
puts "";
puts "=== Error Handling ===";

try {
    puts "In try block";
    let risky = 10 / 2;
    puts risky;
    throw "Something went wrong!";
    puts "This won't execute";
} catch err {
    puts "Caught error:";
    puts err;
}

puts "After try-catch";

// ============================================
// 10. Complex Example: Data Processing
// ============================================
puts "";
puts "=== Complex Example ===";

struct Student {
    name,
    grade,
    passed
}

fn create_student(name, grade) {
    let passed = grade >= 60;
    return Student { name: name, grade: grade, passed: passed };
}

let students = [
    create_student("Alice", 85),
    create_student("Bob", 55),
    create_student("Charlie", 92)
];

puts "Students:";
let student_count = len(students);
for i in 0..student_count {
    let student = students[i];
    puts "---";
    puts student.name;
    puts student.grade;
    
    if student.passed == true {
        puts "Status: PASSED";
    } else {
        puts "Status: FAILED";
    }
}

// ============================================
// 11. String Indexing
// ============================================
puts "";
puts "=== String Indexing ===";

let word = "Hello";
puts "First character:";
puts word[0];

puts "Third character:";
puts word[2];

// ============================================
// 12. Nested Structs
// ============================================
puts "";
puts "=== Nested Structs ===";

struct Address {
    street,
    city,
    zip
}

struct Employee {
    name,
    position,
    address
}

let addr = Address { street: "123 Main St", city: "NYC", zip: 10001 };
let emp = Employee { name: "John Doe", position: "Developer", address: addr };

puts "Employee:";
puts emp.name;
puts emp.position;
puts "Address:";
puts emp.address.street;
puts emp.address.city;

// ============================================
// 13. Advanced Control Flow
// ============================================
puts "";
puts "=== Advanced Control Flow ===";

puts "Nested loops with break:";
for i in 0..3 {
    for j in 0..3 {
        if j == 2 {
            break;
        }
        let val = i * 10 + j;
        puts val;
    }
}

// ============================================
// 14. Standard Library in Action
// ============================================
puts "";
puts "=== Standard Library Demo ===";

fn calculate_stats(numbers) {
    let sum = 0;
    let count = len(numbers);
    
    let idx = 0;
    while idx < count {
        sum = sum + numbers[idx];
        idx = idx + 1;
    }
    
    let avg = sum / count;
    let min_val = numbers[0];
    let max_val = numbers[0];
    
    let j = 1;
    while j < count {
        min_val = min(min_val, numbers[j]);
        max_val = max(max_val, numbers[j]);
        j = j + 1;
    }
    
    puts "Count: ";
    puts count;
    puts "Sum: ";
    puts sum;
    puts "Average: ";
    puts avg;
    puts "Min: ";
    puts min_val;
    puts "Max: ";
    puts max_val;
}

let data = [23, 45, 12, 67, 34, 89, 15];
puts "Statistics for array:";
puts data;
calculate_stats(data);

puts "";
puts "=== Phase 2 Demo Complete! ===";
puts "Features: Structs, File I/O, Error Handling, Break/Continue, Standard Library";

//////////////////////////////////////
// ChocoLang 3.0.0 - Milky Way
// Phase 3 Test File
// Made by Camila "Mocha" Rose
//////////////////////////////////////

puts "=== ChocoLang 3.0.0 - Milky Way ===";
puts "";

// ============================================
// 1. Type System with Inference and typeof
// ============================================
puts "=== Type System ===";

let number = 42;
let text = "Hello";
let flag = true;
let list = [1, 2, 3];

puts "Type of number:";
puts typeof(number);

puts "Type of text:";
puts typeof(text);

puts "Type of flag:";
puts typeof(flag);

puts "Type of list:";
puts typeof(list);

struct Point {
    x,
    y
}

let point = Point { x: 10, y: 20 };
puts "Type of point:";
puts typeof(point);

// ============================================
// 2. Closures and Lambdas
// ============================================
puts "";
puts "=== Closures and Lambdas ===";

// Simple lambda
let double = |x| => {
    return x * 2;
};

puts "Double of 5:";
puts double(5);

// Lambda with multiple parameters
let add = |a, b| => {
    return a + b;
};

puts "Add 10 + 20:";
puts add(10, 20);

// Closure capturing variables
let multiplier = 3;
let multiply_by = |x| => {
    return x * multiplier;
};

puts "Multiply 7 by 3:";
puts multiply_by(7);

// Lambda with no parameters - use underscore as placeholder
let greet = |_| => {
    return "Hello from lambda!";
};

puts greet(0);

// ============================================
// 3. Pattern Matching
// ============================================
puts "";
puts "=== Pattern Matching ===";

let day = 3;

match day {
    case 1 => {
        puts "Monday";
    }
    case 2 => {
        puts "Tuesday";
    }
    case 3 => {
        puts "Wednesday";
    }
    case 4 => {
        puts "Thursday";
    }
    case 5 => {
        puts "Friday";
    }
    default => {
        puts "Weekend!";
    }
}

// Pattern matching with strings
let color = "red";

match color {
    case "red" => {
        puts "Stop";
    }
    case "yellow" => {
        puts "Caution";
    }
    case "green" => {
        puts "Go";
    }
    default => {
        puts "Unknown color";
    }
}

// Pattern matching with calculations
let score = 85;
let grade = 0;

match score {
    case 90 => {
        grade = 4;
    }
    case 80 => {
        grade = 3;
    }
    case 70 => {
        grade = 2;
    }
    default => {
        grade = 1;
    }
}

puts "Grade:";
puts grade;

// ============================================
// 4. Higher-Order Functions with Lambdas
// ============================================
puts "";
puts "=== Higher-Order Functions ===";

let numbers = [1, 2, 3, 4, 5];

// Map: transform each element
let doubled = map(numbers, |x| => {
    return x * 2;
});

puts "Doubled numbers:";
puts doubled;

// Filter: keep only elements that match condition
let evens = filter(numbers, |x| => {
    return x % 2 == 0;
});

puts "Even numbers:";
puts evens;

// Reduce: combine elements into single value
let sum = reduce(numbers, 0, |acc, x| => {
    return acc + x;
});

puts "Sum of numbers:";
puts sum;

// ============================================
// 5. Advanced Lambda Examples
// ============================================
puts "";
puts "=== Advanced Lambdas ===";

// Lambda that returns a lambda
fn create_adder(n) {
    let adder = |x| => {
        return x + n;
    };
    return adder;
}

let add5 = create_adder(5);
puts "Add 5 to 10:";
puts add5(10);

let add100 = create_adder(100);
puts "Add 100 to 50:";
puts add100(50);

// ============================================
// 6. Complex Higher-Order Function Usage
// ============================================
puts "";
puts "=== Complex HOF Examples ===";

let data = [10, 15, 20, 25, 30, 35, 40];

// Chain operations: filter then map
let filtered = filter(data, |x| => {
    return x >= 20;
});

let result = map(filtered, |x| => {
    return x / 5;
});

puts "Filtered and transformed:";
puts result;

// ============================================
// 7. Pattern Matching with Functions
// ============================================
puts "";
puts "=== Pattern Matching in Functions ===";

fn get_message(code) {
    let msg = "";
    match code {
        case 200 => {
            msg = "OK";
        }
        case 404 => {
            msg = "Not Found";
        }
        case 500 => {
            msg = "Server Error";
        }
        default => {
            msg = "Unknown";
        }
    }
    return msg;
}

puts "Status 200:";
puts get_message(200);

puts "Status 404:";
puts get_message(404);

puts "Status 999:";
puts get_message(999);

// ============================================
// 8. Lambda with Arrays
// ============================================
puts "";
puts "=== Lambdas with Arrays ===";

let words = ["hello", "world", "choco", "lang"];

let upper_words = map(words, |w| => {
    return uppercase(w);
});

puts "Uppercase words:";
puts upper_words;

let long_words = filter(words, |w| => {
    return len(w) > 4;
});

puts "Long words (>4 chars):";
puts long_words;

// ============================================
// 9. Closures with State
// ============================================
puts "";
puts "=== Closures with State ===";

fn counter() {
    let count = 0;
    let increment = |_| => {
        count = count + 1;
        return count;
    };
    return increment;
}

let c1 = counter();
puts "Counter 1:";
puts c1(0);
puts c1(0);
puts c1(0);

// ============================================
// 10. Type Inference Examples
// ============================================
puts "";
puts "=== Type Inference ===";

let inferred_num = 100;
let inferred_str = "auto";
let inferred_arr = [true, false, true];

puts "Inferred types:";
puts typeof(inferred_num);
puts typeof(inferred_str);
puts typeof(inferred_arr);

// ============================================
// 11. Advanced Pattern Matching
// ============================================
puts "";
puts "=== Advanced Pattern Matching ===";

fn describe_number(n) {
    match n {
        case 0 => {
            puts "Zero";
        }
        case 1 => {
            puts "One";
        }
        case 2 => {
            puts "Two";
        }
        default => {
            puts "Many";
        }
    }
}

describe_number(0);
describe_number(1);
describe_number(42);

// ============================================
// 12. Combining All Features
// ============================================
puts "";
puts "=== Combined Example ===";

struct Person {
    name,
    age,
    city
}

let people = [
    Person { name: "Alice", age: 30, city: "NYC" },
    Person { name: "Bob", age: 25, city: "LA" },
    Person { name: "Charlie", age: 35, city: "SF" }
];

// Filter people over 28
let adults = filter(people, |p| => {
    return p.age > 28;
});

puts "Adults over 28:";
let idx = 0;
while idx < len(adults) {
    puts adults[idx].name;
    idx = idx + 1;
}

// Get all ages
let ages = map(people, |p| => {
    return p.age;
});

puts "All ages:";
puts ages;

// Sum of all ages
let total_age = reduce(ages, 0, |sum, age| => {
    return sum + age;
});

puts "Total age:";
puts total_age;

// Average age
let avg_age = total_age / len(people);
puts "Average age:";
puts avg_age;

// ============================================
// 13. Lambda Factorial
// ============================================
puts "";
puts "=== Lambda Factorial ===";

fn make_factorial() {
    let fact = |n| => {
        let result = 1;
        let i = 1;
        while i <= n {
            result = result * i;
            i = i + 1;
        }
        return result;
    };
    return fact;
}

let factorial = make_factorial();
puts "Factorial of 5:";
puts factorial(5);

puts "Factorial of 7:";
puts factorial(7);

// ============================================
// 14. Pattern Match Calculator
// ============================================
puts "";
puts "=== Pattern Match Calculator ===";

fn calculate(operation, a, b) {
    let result = 0;
    match operation {
        case "add" => {
            result = a + b;
        }
        case "sub" => {
            result = a - b;
        }
        case "mul" => {
            result = a * b;
        }
        case "div" => {
            result = a / b;
        }
        default => {
            result = 0;
        }
    }
    return result;
}

puts "10 + 5:";
puts calculate("add", 10, 5);

puts "10 * 3:";
puts calculate("mul", 10, 3);

// ============================================
// 15. Type-Safe Operations
// ============================================
puts "";
puts "=== Type-Safe Operations ===";

fn safe_divide(a, b) {
    let type_a = typeof(a);
    let type_b = typeof(b);
    
    if type_a == "number" && type_b == "number" {
        if b == 0 {
            return "Error: Division by zero";
        } else {
            return str(a / b);
        }
    } else {
        return "Error: Invalid types";
    }
}

puts "20 / 4:";
puts safe_divide(20, 4);

puts "20 / 0:";
puts safe_divide(20, 0);

puts "";
puts "=== Phase 3 Complete! ===";
puts "Features: Type System, Closures/Lambdas, Pattern Matching, HOF";